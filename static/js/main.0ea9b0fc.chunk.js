(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(18),s=n.n(o),l=(n(27),n(28),n(29),n(2)),r=n(0),i=function(e){var t=Object(l.f)();return Object(r.jsx)("div",{className:"wrapper",children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(e);var n={};n.email=e.target[0].value,n.pass=e.target[1].value;var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};"register"==e.nativeEvent.submitter.id?fetch("https://class-contact-list-app.herokuapp.com/auth/register",a).then((function(e){return e.json().then((function(e){"success"==e.status?alert("Congrats, you registered as well! Please login."):alert(e.message),console.log(e)}))})):"login"==e.nativeEvent.submitter.id&&fetch("https://class-contact-list-app.herokuapp.com/auth/login",a).then((function(e){return e.json().then((function(e){alert(e.message),console.log(e),localStorage.setItem("token",e.token),t.push("/contacts")}))}))},children:[Object(r.jsx)("input",{name:"email",type:"email"}),Object(r.jsx)("input",{name:"pass",type:"password"}),Object(r.jsxs)("section",{children:[Object(r.jsx)("input",{id:"register",type:"submit",value:"Register"}),Object(r.jsx)("input",{id:"login",type:"submit",value:"Login"})]})]})})},u=n(21),p=n(22),d=n(9),h=(n(36),function(e){var t=e.contact,n=e.deleteContact,c=t.fullName,o=t.email,s=t.phone,l=t.address,i=t.avatar,u={_id:t._id},p=Object(a.useState)(!1),h=Object(d.a)(p,2),j=h[0],f=h[1],b=Object(a.useState)("white"),m=Object(d.a)(b,2),O=m[0],g=m[1],v=function(e){var t,n=e.target.getAttribute("data-id");t="file"==n?e.target.files[0]:e.target.innerText,u[n]=t},x=function(e){console.log(e),13==e.charCode&&e.preventDefault()};return Object(r.jsxs)("div",{className:"card",style:{backgroundColor:O},children:[j?Object(r.jsx)("input",{"data-id":"file",type:"file",onChange:v}):Object(r.jsx)("img",{src:"https://class-contact-list-app.herokuapp.com/avatars/"+i}),Object(r.jsx)("div",{"data-id":"fullName",onKeyPress:x,onBlur:v,contentEditable:j,children:c}),Object(r.jsx)("div",{"data-id":"email",onKeyPress:x,onBlur:v,contentEditable:j,children:o}),Object(r.jsx)("div",{"data-id":"phone",onKeyPress:x,onBlur:v,contentEditable:j,children:s}),Object(r.jsx)("div",{"data-id":"address",onKeyPress:x,onBlur:v,contentEditable:j,children:l}),Object(r.jsx)("button",{onClick:function(){f(!j),g(j?"white":"lavender")},children:"\u270f\ufe0f"}),Object(r.jsx)("button",{onClick:function(){console.log(u);var e=new FormData;Object.keys(u).forEach((function(t){e.append(t,u[t])}));var t={method:"POST",headers:{"x-auth-token":localStorage.getItem("token")},body:e};fetch("https://class-contact-list-app.herokuapp.com/contacts/update",t).then((function(e){return e.json().then((function(e){"success"===e.status?(f(!1),g("green")):g("coral")}))})).catch((function(e){return g("coral")}))},children:"\ud83d\udcbe"}),Object(r.jsx)("button",{onClick:n,children:"\ud83d\uddd1\ufe0f"})]})});var j=function(){var e=this,t=Object(l.f)();Object(a.useEffect)((function(){localStorage.getItem("token")||t.push("/auth")}));var n={"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},c=Object(a.useState)({fullName:"",email:"",phone:"",address:""}),o=Object(d.a)(c,2),s=o[0],i=o[1],j=Object(a.useState)([{_id:"1",fullName:"test",email:"t@t.com",phone:"123456",address:"test"}]),f=Object(d.a)(j,2),b=f[0],m=f[1],O=function(e,t){var n=Object(p.a)({},s);n[t]=e.target.value,i(n)};Object(a.useEffect)((function(){fetch("https://class-contact-list-app.herokuapp.com/contacts/all",{headers:n}).then((function(e){return e.json().then((function(e){"success"==e.status?m(e.data):console.log(e.message)}))}))}),[]);var g=function(e){fetch("https://class-contact-list-app.herokuapp.com/contacts/"+e,{method:"DELETE",headers:n}).then((function(e){return e.json().then((function(e){if("success"===e.status){alert(e.message);var t=b.filter((function(t){if(t._id!=e.data)return t}));m(t)}else alert("There's an error. For details please check the console."),console.log(e.message)}))})).catch((function(e){alert(e)}))},v=[];return"object"==typeof b&&b.length>0&&(v=b.map((function(t){return Object(r.jsx)(h,{contact:t,deleteContact:g.bind(e,t._id)},t._id)}))),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("fullName",s.fullName),t.append("email",s.email),t.append("phone",s.phone),t.append("address",s.address),t.append("file",e.target[4].files[0]);var n={method:"POST",headers:{"x-auth-token":localStorage.getItem("token")},body:t};fetch("https://class-contact-list-app.herokuapp.com/contacts/new",n).then((function(e){return e.json().then((function(e){return m([].concat(Object(u.a)(b),[e]))}))}))},children:[Object(r.jsx)("input",{required:!0,placeholder:"Full name",value:s.fullName,onChange:function(e){return O(e,"fullName")}}),Object(r.jsx)("input",{type:"email",placeholder:"Email",value:s.email,onChange:function(e){return O(e,"email")}}),Object(r.jsx)("input",{type:"tel",placeholder:"Phone number",value:s.phone,onChange:function(e){return O(e,"phone")}}),Object(r.jsx)("input",{placeholder:"Address",value:s.address,onChange:function(e){return O(e,"address")}}),Object(r.jsx)("input",{type:"file"}),Object(r.jsx)("button",{children:"Create Contact"})]}),Object(r.jsx)("section",{className:"contact-list",children:v})]})},f=n(20),b=(n(37),function(){return Object(r.jsx)("div",{id:"get-contact",children:Object(r.jsxs)("form",{className:"contact-form",onSubmit:function(e){e.preventDefault(),console.log(e);var t=new FormData;t.append("fullName",e.target[0].value),t.append("email",e.target[1].value),t.append("phone",e.target[2].value),t.append("message",e.target[3].value),Array.from(e.target[4].files).forEach((function(e){t.append("attachs",e)})),console.log(1,t);var n,a=Object(f.a)(t.values());try{for(a.s();!(n=a.n()).done;){var c=n.value;console.log(c)}}catch(o){a.e(o)}finally{a.f()}console.log(3,Object.fromEntries(t));fetch("https://class-contact-list-app.herokuapp.com/get-contact",{method:"POST",body:t}).then((function(e){console.log(e),e.json().then((function(e){e.status,alert(e.message),console.log(e)}))}))},children:[Object(r.jsx)("input",{type:"text",placeholder:"Full Name"}),Object(r.jsx)("input",{type:"email",placeholder:"Email"}),Object(r.jsx)("input",{type:"tel",placeholder:"Phone"}),Object(r.jsx)("textarea",{type:"text",placeholder:"Message"}),Object(r.jsx)("input",{type:"file",multiple:!0}),Object(r.jsx)("button",{children:"Get Contact"})]})})});var m=function(){return Object(r.jsxs)(l.c,{children:[Object(r.jsx)(l.a,{path:"/auth",children:Object(r.jsx)(i,{})}),Object(r.jsx)(l.a,{path:"/contacts",children:Object(r.jsx)(j,{})}),Object(r.jsx)(l.a,{path:"/get-contact",children:Object(r.jsx)(b,{})}),Object(r.jsx)(l.a,{path:"/",children:Object(r.jsx)(i,{})})]})},O=n(10);s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(O.a,{children:Object(r.jsx)(m,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.0ea9b0fc.chunk.js.map